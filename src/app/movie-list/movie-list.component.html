<header>
    <h3 *ngIf="isAdminPage===false">NMS Cinemas Movies List</h3>
    <h5 *ngIf="isAdminPage===true">Now Playing</h5>
</header>
<div class="position-relative">
    <!-- Prev -->
    <button type="button" class="btn btn-dark shadow position-absolute top-50 translate-middle-y z-2"
        style="left: .5rem;" (click)="scrollStrip(-1)">
        ‹
    </button>

    <div #strip id="cardStrip" class="card-strip d-flex gap-3 overflow-auto flex-nowrap py-2">
        <div class="card shadow-sm" *ngFor="let movie of moviesList" style="width: 280px; height: 460px;">
            <img src="{{apiUrl}}{{movie.image}}" width="480" height="240" class="card-img-top" alt="Sample 1">
            <div class="card-body">
                <a href="/moviedetails?id={{movie.id}}" class="stretched-link text-decoration-none text-dark"></a>
                <div>
                    <h5 class="card-title" [ngClass]="movie.name">{{movie.name}}</h5>
                    <p class="card-text small text-body-secondary">{{movie.rating}} | {{movie.length}}</p>
                    <p class="card-text small text-body-secondary">{{movie.releaseDate}}</p>
                </div>
                <div class="mt-auto text-end" *ngIf="(userName==='admin')">
                    <button class="btn btn-small btn-outline-danger position-relative z-1"
                        (click)="deleteMovie(movie.id, $event)">
                        <i class="bi bi-trash"></i>
                    </button>
                </div>
            </div>
        </div>
    </div>
    <!-- Next -->
    <button type="button" class="btn btn-dark shadow position-absolute top-50 end-0 translate-middle-y z-10"
        (click)="scrollStrip(1)" aria-label="Next">
        ›
    </button>
</div>
<!-- Card to Add New Task-->
<div class="container" style="align-items: center; width: 50%;" *ngIf="isAdminPage===false">
    <div class="card shadow-sm mb-3" style="margin-top: 1.5rem;">
        <div class="card-header bg-black text-white align-items-center">
            <h4>Add New Movie</h4>
        </div>
        <div class="card-body">
            <form>
                <div class="row mb-3 align-items-center">
                    <div class="col-auto">
                        <label for="name" class="col-form-label">Name</label>
                    </div>
                    <div class="col-auto">
                        <input type="text" id="name" class="form-control" [(ngModel)]="newMovie.name" name="title"
                            size="60" required />
                    </div>
                </div>
                <div class="row mb-3 align-items-center">
                    <div class="col-auto">
                        <label for="length" class="col-form-label">Length</label>
                    </div>
                    <div class="col-auto">
                        <input type="text" id="length" class="form-control" [(ngModel)]="newMovie.length" name="length"
                            placeholder="2 HR 35 MIN" size="10" required>
                    </div>
                </div>
                <div class="row mb-3 align-items-center">
                    <div class="col-auto">
                        <label for="rating" class="col-form-label">Rating</label>
                    </div>
                    <div class="col-auto">
                        <input type="text" id="rating" class="form-control" [(ngModel)]="newMovie.rating" name="rating"
                            placeholder="PG-13" size="10" required>
                    </div>
                </div>
                <div class="row mb-3 align-items-center">
                    <div class="col-auto">
                        <label for="genre" class="col-form-label">Genre</label>
                    </div>
                    <div class="col-auto">
                        <input type="text" id="genre" class="form-control" [(ngModel)]="newMovie.genre" name="genre"
                            placeholder="Action" size="30" required>
                    </div>
                </div>
                <div class="mb-3">
                    <label for="description" class="form-label">Description</label>
                    <textarea type="text" id="description" class="form-control" [(ngModel)]="newMovie.description"
                        name="description" required></textarea>
                </div>
                <div class="row mb-3 align-items-center">
                    <div class="col-auto">
                        <label for="releasedate" class="col-form-label">Release Date</label>
                    </div>
                    <div class="col-auto">
                        <input type="date" id="releasedate" class="form-control" [(ngModel)]="newMovie.releaseDate"
                            name="releasedate" placeholder="Action" size="30" required>
                    </div>
                </div>
                <div class="row mb-3 align-items-center">
                    <div class="col-auto">
                        <label for="imagefile" class="col-form-label">Choose movie image </label>
                    </div>
                    <div class="col-auto">
                        <input type="file" id="imagefile" (change)="onFileSelected($event)" name="filename"
                            accept="image/*">
                    </div>
                    <div class="col-auto">
                        <button class="btn btn-primary ms-2" (click)="upload()"
                            [disabled]="!selectedFile">Upload</button>
                    </div>

                    <!-- Code to test if the image file uploaded successfully
                    <div *ngIf="uploadedUrl" class="mt-3">
                        <div>Uploaded URL: {{ uploadedUrl }}</div>
                        <img [src]="uploadedUrl" alt="Uploaded" style="max-width: 300px;">
                    </div>-->
                </div>
                <div class="d-grid">
                    <button type="submit" class="btn btn-dark mt-4" (click)="addMovie()">
                        <i class="bi bi-file-plus"></i> Add Movie
                    </button>
                </div>
            </form>
        </div>
    </div>
</div>